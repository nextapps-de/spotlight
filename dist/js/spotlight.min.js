/**
 * Spotlight.js v0.7.5
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b){a.classList.add(b)}function g(a,b){a.classList.remove(b)}function h(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){h(a,"transition","none");b();aa||(aa=a.clientTop&&0);h(a,"transition","")}function k(a,b,c,e){a.addEventListener(b,c,e||!1===e?e:!0)}function ca(a,b,c,e){a.removeEventListener(b,c,e||!1===e?e:!0)}function da(a,b){a.stopPropagation();b&&a.preventDefault()};var m=document.createElement("div");m.id="spotlight";m.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";/*
 toggle_autofit &&*/
var n="theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),ea={page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1},fa=document.createElement("video"),p={},ha={},q,r,ia,ja,t,ka,la,ma,u,na,oa,pa,v,w,x,y,z,A,B,C,qa,ra,sa,ta,ua,va,D,wa,xa,ya,za,Aa,Ba,Ca,Da,E,F,G,H,I,J,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,K,Oa,M,Pa,N,O,Qa,P,Ra;k(document,"click",Sa);
function Ta(){function a(c){return p[c]=(m||document).getElementsByClassName("spl-"+c)[0]}if(!F){F=document.body;J=a("scene");Ea=a("header");Fa=a("footer");Ga=a("title");Ha=a("description");Ia=a("button");Ja=a("prev");Ka=a("next");Ma=a("page");K=a("progress");Oa=a("spinner");H=[a("pane")];Q("close",Ua);F[P="requestFullscreen"]||F[P="msRequestFullscreen"]||F[P="webkitRequestFullscreen"]||F[P="mozRequestFullscreen"]||(P="");P?(Ra=P.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),La=Q("fullscreen",Va)):n.pop();Q("autofit",R);Q("zoom-in",Wa);Q("zoom-out",Xa);Q("theme",Ya);Na=Q("play",S);Q("download",Za);k(Ja,"click",$a);k(Ka,"click",T);var b=a("track");k(b,"mousedown",ab);k(b,"mousemove",cb);k(b,"mouseleave",db);k(b,"mouseup",db);k(b,"touchstart",ab,{passive:!1});k(b,"touchmove",cb,{passive:!0});k(b,"touchend",db);k(Ia,"click",function(){za?za(x,A):ya&&(location.href=ya)})}}
function Q(a,b){var c=document.createElement("div");c.className="spl-"+a;k(c,"click",b);Ea.appendChild(c);return p[a]=c}function Sa(a){var b=a.target.closest(".spotlight");if(b){da(a,!0);a=b.closest(".spotlight-group");z=(a||document).getElementsByClassName("spotlight");for(var c=0;c<z.length;c++)if(z[c]===b){B=a&&a.dataset;eb(c+1);break}}}
function eb(a){if(y=z.length){F||Ta();ra&&ra(a);for(var b=H[0],c=b.parentNode,e=H.length;e<y;e++){var f=b.cloneNode(!1);h(f,"left",100*e+"%");c.appendChild(f);H[e]=f}G||(F.appendChild(m),fb());x=a||1;U(J);gb(!0);history.pushState({spl:1},"");history.pushState({spl:2},"");hb(m);d(F,"hide-scrollbars");d(m,"show");ib(!0);fb();V();D&&S()}}function W(a,b){a=A[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function jb(a){a?ba(I,jb):((Da?hb:U)(J),h(I,"opacity",Ca?0:1),kb(Ba&&.8),E&&d(I,E))}
function lb(a,b){G=H[a-1];I=G.firstChild;x=a;if(I)v&&R(),ua&&d(I,ua),jb(!0),E&&g(I,E),Ca&&h(I,"opacity",1),Ba&&h(I,"transform",""),h(I,"visibility","visible"),b&&Pa&&(document.createElement("img").src=Pa);else{var c=M.media,e=W("spinner",!0);if("video"===c)X(e,!0),I=document.createElement("video"),I.onloadedmetadata=function(){I&&(I.width=I.videoWidth,I.height=I.videoHeight,Y(),X(e),lb(a,b))},I.poster=A.poster,I.preload=xa?"auto":"metadata",I.controls=W("controls",!0),I.autoplay=D,I.h=W("inline"),
I.muted=W("muted"),I.src=M.src,G.appendChild(I);else{if("node"===c){I=M.src;"string"===typeof I&&(I=document.querySelector(I));I&&(I.g||(I.g=I.parentNode),Y(),G.appendChild(I),lb(a,b));return}X(e,!0);I=document.createElement("img");I.onload=function(){I&&(X(e),lb(a,b),Y())};I.src=M.src;G.appendChild(I)}I&&(e||h(I,"visibility","visible"),I.onerror=function(){G.removeChild(I);I=null;d(Oa,"error");X(e)})}}function X(a,b){a&&(b?d:g)(Oa,"spin")}
function mb(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function nb(){fb();I&&Y();P&&(mb()?d(La,"on"):(g(La,"on"),ob(La,0<=screen.availHeight-window.outerHeight)))}function fb(){t=m.clientWidth;ka=m.clientHeight}function Y(){la=I.clientWidth;ma=I.clientHeight}function kb(a){h(I,"transform","translate(-50%, -50%) scale("+(a||u)+")")}function Z(a,b){h(G,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function pb(a,b,c){b?ba(J,function(){pb(a,!1,c)}):h(J,"transform","translateX("+(100*-a+(c||0))+"%)")}function ib(a){a=a?k:ca;a(window,"keydown",qb);a(window,"wheel",rb);a(window,"resize",nb);a(window,"popstate",sb)}function sb(a){G&&a.state.spl&&Ua(!0)}function qb(a){if(G)switch(a.keyCode){case 8:R();break;case 27:Ua();break;case 32:D&&S();break;case 37:$a();break;case 39:T();break;case 38:case 107:case 187:Wa();break;case 40:case 109:case 189:Xa()}}
function rb(a){G&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?Xa():Wa())}function S(a){("boolean"===typeof a?a:!N)?N||(N=setInterval(T,1E3*Aa),d(Na,"on"),qa&&tb(!0)):N&&(N=clearInterval(N),g(Na,"on"),qa&&tb())}function tb(a){ba(K,function(){h(K,"transition-duration","");h(K,"transform","")});a&&(h(K,"transition-duration",Aa+"s"),h(K,"transform","translateX(0)"))}function V(){va&&(Qa=Date.now()+2950,O||(d(m,"menu"),vb(3E3)))}
function vb(a){O=setTimeout(function(){var b=Date.now();b>=Qa?(g(m,"menu"),O=0):vb(Qa-b)},a)}function wb(a){"boolean"===typeof a&&(O=a?O:0);O?(O=clearTimeout(O),g(m,"menu")):V()}function ab(a){da(a,!0);na=!0;oa=!1;var b=a.touches;b&&(b=b[0])&&(a=b);pa=la*u<=t;ia=a.pageX;ja=a.pageY;U(G)}function db(a){da(a);if(na){if(oa){if(pa&&oa){var b=(a=q<-(t/7)&&(x<y||C))||q>t/7&&(1<x||C);if(a||b)pb(x-1,!0,q/t*100),a&&T()||b&&$a();q=0;Z()}hb(G)}else wb();na=!1}}
function cb(a){da(a);if(na){var b=a.touches;b&&(b=b[0])&&(a=b);b=(la*u-t)/2;q-=ia-(ia=a.pageX);pa||(q>b?q=b:q<-b&&(q=-b),ma*u>ka&&(b=(ma*u-ka)/2,r-=ja-(ja=a.pageY),r>b?r=b:r<-b&&(r=-b)));oa=!0;Z(q,r)}else V()}function Va(a){var b=mb();if("boolean"!==typeof a||a!==!!b)if(b)document[Ra]();else m[P]()}function Ya(a){"string"!==typeof a&&(a=w?"":wa||"white");w!==a&&(w&&g(m,w),a&&d(m,a),w=a)}
function R(a){"boolean"===typeof a&&(v=!a);(v=1===u&&!v)?d(I,"autofit"):g(I,"autofit");h(I,"transform","");u=1;r=q=0;Y();U(G);Z()}function Wa(){var a=u/.65;50>=a&&(v&&R(),q/=.65,r/=.65,Z(q,r),xb(a))}function Xa(){var a=.65*u;v&&R();1<=a&&(1===a?q=r=0:(q*=.65,r*=.65),Z(q,r),xb(a))}function xb(a){u=a||1;kb()}function Za(){var a=document.createElement("a");a.href=I.src;a.download=I.src.substring(I.src.lastIndexOf("/")+1);F.appendChild(a);a.click();F.removeChild(a)}
function Ua(a){setTimeout(function(){F.removeChild(m);G=I=M=A=B=z=ra=sa=ta=za=null},200);g(F,"hide-scrollbars");g(m,"show");Va(!1);ib();history.go(!0===a?-1:-2);N&&S();I&&yb(I);O&&wb(!0);w&&Ya();ta&&ta()}function yb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a)}}function $a(a){a&&V();if(1<y){if(1<x)return zb(x-1);if(C)return pb(y,!0),zb(y)}}function T(a){a&&V();if(1<y){if(x<y)return zb(x+1);if(C)return pb(-1,!0),zb(1);N&&S()}}
function zb(a){if(a!==x){N?S():V();var b=a>x;x=a;gb(b);D&&S();return!0}}var Ab=navigator.connection,Bb=window.devicePixelRatio||1;
function Cb(a,b,c){if("node"!==c.media)for(var e=Object.keys(c),f=0,l;f<e.length;f++)if(l=e[f],3<l.length&&0===l.indexOf("src"))if("video"===c.media){var L=ha[l];if(L){if(0<L){var bb=c[l];break}}else if(fa.canPlayType("video/"+l.substring(3).toLowerCase())){ha[l]=1;bb=c[l];break}else ha[l]=-1}else if(L=parseInt(l.substring(4),10))if(L=Math.abs(b-L),!ub||L<ub){var ub=L;bb=c[l]}return bb||c.src||c.href||a.src||a.href}
function Db(){var a=z[x-1],b=a;A={};B&&Object.assign(A,B);Object.assign(A,b.dataset||b);za=A.onclick;wa=W("theme");va=W("autohide",!0);C=W("infinite");qa=W("progress",!0);D=W("autoplay");xa=W("preload",!0);ya=W("buttonHref");Aa=D&&parseFloat(D)||7;w||wa&&Ya(wa);if(b=A.control){b="string"===typeof b?b.split(","):b;for(var c=0;c<n.length;c++)A[n[c]]=!1;for(c=0;c<b.length;c++){var e=b[c].trim();"zoom"===e?A["zoom-in"]=A["zoom-out"]=!0:A[e]=!0}}b=A.animation;Ba=Ca=Da=!b;E=!1;if(b)for(b="string"===typeof b?
b.split(","):b,c=0;c<b.length;c++)e=b[c].trim(),"scale"===e?Ba=!0:"fade"===e?Ca=!0:"slide"===e?Da=!0:e&&(E=e);ua=A.fit;c=Ab&&Ab.downlink;b=Math.max(ka,t)*Bb;c&&1200*c<b&&(b=1200*c);var f;c=A.media;e=Cb(a,b,A);var l;if(!(l=a.alt||a.title)){if(l=1===a.nodeType)l=f=(a||document).getElementsByTagName("img")[0];l=l&&(f.alt||f.title)}M={media:c,src:e,title:W("title",l)};Pa="";xa&&(a=z[x])&&(f=a.dataset||a,f.media&&"image"!==f.media||(Pa=Cb(a,b,f)));for(a=0;a<n.length;a++)f=n[a],ob(p[f],W(f,ea[f]))}
function gb(a){r=q=0;u=1;Db();pb(x-1);if(I){var b=I;setTimeout(function(){b&&I!==b&&(yb(b),b=null)},650);jb();Z()}else g(Oa,"error");lb(x,a);U(G);Z();a=M.title;var c=W("description"),e=W("button"),f=a||c||e;f&&(a&&(Ga.firstChild.nodeValue=a),c&&(Ha.firstChild.nodeValue=c),e&&(Ia.firstChild.nodeValue=e),ob(Ga,a),ob(Ha,c),ob(Ia,e),h(Fa,"transform","all"===va?"":"none"));va||d(m,"menu");Eb(Fa,f);Eb(Ja,C||1<x);Eb(Ka,C||x<y);Ma.firstChild.nodeValue=1<y?x+" / "+y:"";sa&&sa(x,A)}
function ob(a,b){h(a,"display",b?"":"none")}function Eb(a,b){h(a,"visibility",b?"":"hidden")}function U(a){h(a,"transition","none")}function hb(a){h(a,"transition","")};window.Spotlight={init:Ta,theme:Ya,fullscreen:Va,download:Za,autofit:R,next:T,prev:$a,goto:zb,close:Ua,zoom:xb,menu:wb,show:function(a,b,c){z=a;b&&(B=b,ra=b.onshow,sa=b.onchange,ta=b.onclose,c=c||b.index);eb(c)},play:S,addControl:Q,removeControl:function(a){var b=p[a];b&&(Ea.removeChild(b),p[a]=null)}};}).call(this);
